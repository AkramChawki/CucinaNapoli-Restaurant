import{r as i,i as C}from"./app-a4a976e8.js";import{u as w,d as X,f as Y,p as Z,s as y,l as ee,S as fe,D as _,y as re,j as x,a as te,c as ve,o as P,e as pe,X as ne}from"./use-flags-d53856ef.js";let q=i.createContext(null);q.displayName="OpenClosedContext";var $=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))($||{});function ie(){return i.useContext(q)}function he({value:e,children:r}){return C.createElement(q.Provider,{value:e},r)}function me(e){let r={called:!1};return(...n)=>{if(!r.called)return r.called=!0,e(...n)}}function G(e,...r){e&&r.length>0&&e.classList.add(...r)}function J(e,...r){e&&r.length>0&&e.classList.remove(...r)}function ge(e,r){let n=X();if(!e)return n.dispose;let{transitionDuration:l,transitionDelay:f}=getComputedStyle(e),[g,v]=[l,f].map(s=>{let[a=0]=s.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,E)=>E-u);return a}),d=g+v;if(d!==0){n.group(a=>{a.setTimeout(()=>{r(),a.dispose()},d),a.addEventListener(e,"transitionrun",u=>{u.target===u.currentTarget&&a.dispose()})});let s=n.addEventListener(e,"transitionend",a=>{a.target===a.currentTarget&&(r(),s())})}else r();return n.add(()=>r()),n.dispose}function be(e,r,n,l){let f=n?"enter":"leave",g=X(),v=l!==void 0?me(l):()=>{};f==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let d=w(f,{enter:()=>r.enter,leave:()=>r.leave}),s=w(f,{enter:()=>r.enterTo,leave:()=>r.leaveTo}),a=w(f,{enter:()=>r.enterFrom,leave:()=>r.leaveFrom});return J(e,...r.enter,...r.enterTo,...r.enterFrom,...r.leave,...r.leaveFrom,...r.leaveTo,...r.entered),G(e,...d,...a),g.nextFrame(()=>{J(e,...a),G(e,...s),ge(e,()=>(J(e,...d),G(e,...r.entered),v()))}),g.dispose}function Ee({container:e,direction:r,classes:n,onStart:l,onStop:f}){let g=Y(),v=Z(),d=y(r);ee(()=>{let s=X();v.add(s.dispose);let a=e.current;if(a&&d.current!=="idle"&&g.current)return s.dispose(),l.current(d.current),s.add(be(a,n.current,d.current==="enter",()=>{s.dispose(),f.current(d.current)})),s.dispose},[r])}function R(e=""){return e.split(" ").filter(r=>r.trim().length>1)}let A=i.createContext(null);A.displayName="TransitionContext";var Te=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Te||{});function Ce(){let e=i.useContext(A);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function $e(){let e=i.useContext(M);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let M=i.createContext(null);M.displayName="NestingContext";function U(e){return"children"in e?U(e.children):e.current.filter(({el:r})=>r.current!==null).filter(({state:r})=>r==="visible").length>0}function le(e,r){let n=y(e),l=i.useRef([]),f=Y(),g=Z(),v=P((c,t=x.Hidden)=>{let p=l.current.findIndex(({el:o})=>o===c);p!==-1&&(w(t,{[x.Unmount](){l.current.splice(p,1)},[x.Hidden](){l.current[p].state="hidden"}}),g.microTask(()=>{var o;!U(l)&&f.current&&((o=n.current)==null||o.call(n))}))}),d=P(c=>{let t=l.current.find(({el:p})=>p===c);return t?t.state!=="visible"&&(t.state="visible"):l.current.push({el:c,state:"visible"}),()=>v(c,x.Unmount)}),s=i.useRef([]),a=i.useRef(Promise.resolve()),u=i.useRef({enter:[],leave:[],idle:[]}),E=P((c,t,p)=>{s.current.splice(0),r&&(r.chains.current[t]=r.chains.current[t].filter(([o])=>o!==c)),r==null||r.chains.current[t].push([c,new Promise(o=>{s.current.push(o)})]),r==null||r.chains.current[t].push([c,new Promise(o=>{Promise.all(u.current[t].map(([h,L])=>L)).then(()=>o())})]),t==="enter"?a.current=a.current.then(()=>r==null?void 0:r.wait.current).then(()=>p(t)):p(t)}),T=P((c,t,p)=>{Promise.all(u.current[t].splice(0).map(([o,h])=>h)).then(()=>{var o;(o=s.current.shift())==null||o()}).then(()=>p(t))});return i.useMemo(()=>({children:l,register:d,unregister:v,onStart:E,onStop:T,wait:a,chains:u}),[d,v,l,E,T,u,a])}function Fe(){}let we=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function W(e){var r;let n={};for(let l of we)n[l]=(r=e[l])!=null?r:Fe;return n}function xe(e){let r=i.useRef(W(e));return i.useEffect(()=>{r.current=W(e)},[e]),r}let Pe="div",ae=fe.RenderStrategy;function Re(e,r){let{beforeEnter:n,afterEnter:l,beforeLeave:f,afterLeave:g,enter:v,enterFrom:d,enterTo:s,entered:a,leave:u,leaveFrom:E,leaveTo:T,...c}=e,t=i.useRef(null),p=re(t,r),o=c.unmount?x.Unmount:x.Hidden,{show:h,appear:L,initial:b}=Ce(),[m,j]=i.useState(h?"visible":"hidden"),Q=$e(),{register:O,unregister:H}=Q,B=i.useRef(null);i.useEffect(()=>O(t),[O,t]),i.useEffect(()=>{if(o===x.Hidden&&t.current){if(h&&m!=="visible"){j("visible");return}return w(m,{hidden:()=>H(t),visible:()=>O(t)})}},[m,t,O,H,h,o]);let k=y({enter:R(v),enterFrom:R(d),enterTo:R(s),entered:R(a),leave:R(u),leaveFrom:R(E),leaveTo:R(T)}),N=xe({beforeEnter:n,afterEnter:l,beforeLeave:f,afterLeave:g}),I=te();i.useEffect(()=>{if(I&&m==="visible"&&t.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[t,m,I]);let V=b&&!L,se=(()=>!I||V||B.current===h?"idle":h?"enter":"leave")(),S=ve(0),ue=P(F=>w(F,{enter:()=>{S.addFlag($.Opening),N.current.beforeEnter()},leave:()=>{S.addFlag($.Closing),N.current.beforeLeave()},idle:()=>{}})),ce=P(F=>w(F,{enter:()=>{S.removeFlag($.Opening),N.current.afterEnter()},leave:()=>{S.removeFlag($.Closing),N.current.afterLeave()},idle:()=>{}})),D=le(()=>{j("hidden"),H(t)},Q);Ee({container:t,classes:k,direction:se,onStart:y(F=>{D.onStart(t,F,ue)}),onStop:y(F=>{D.onStop(t,F,ce),F==="leave"&&!U(D)&&(j("hidden"),H(t))})}),i.useEffect(()=>{V&&(o===x.Hidden?B.current=null:B.current=h)},[h,V,m]);let z=c,de={ref:p};return L&&h&&b&&(z={...z,className:pe(c.className,...k.current.enter,...k.current.enterFrom)}),C.createElement(M.Provider,{value:D},C.createElement(he,{value:w(m,{visible:$.Open,hidden:$.Closed})|S.flags},ne({ourProps:de,theirProps:z,defaultTag:Pe,features:ae,visible:m==="visible",name:"Transition.Child"})))}function Le(e,r){let{show:n,appear:l=!1,unmount:f,...g}=e,v=i.useRef(null),d=re(v,r);te();let s=ie();if(n===void 0&&s!==null&&(n=(s&$.Open)===$.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[a,u]=i.useState(n?"visible":"hidden"),E=le(()=>{u("hidden")}),[T,c]=i.useState(!0),t=i.useRef([n]);ee(()=>{T!==!1&&t.current[t.current.length-1]!==n&&(t.current.push(n),c(!1))},[t,n]);let p=i.useMemo(()=>({show:n,appear:l,initial:T}),[n,l,T]);i.useEffect(()=>{if(n)u("visible");else if(!U(E))u("hidden");else{let b=v.current;if(!b)return;let m=b.getBoundingClientRect();m.x===0&&m.y===0&&m.width===0&&m.height===0&&u("hidden")}},[n,E]);let o={unmount:f},h=P(()=>{var b;T&&c(!1),(b=e.beforeEnter)==null||b.call(e)}),L=P(()=>{var b;T&&c(!1),(b=e.beforeLeave)==null||b.call(e)});return C.createElement(M.Provider,{value:E},C.createElement(A.Provider,{value:p},ne({ourProps:{...o,as:i.Fragment,children:C.createElement(oe,{ref:d,...o,...g,beforeEnter:h,beforeLeave:L})},theirProps:{},defaultTag:i.Fragment,features:ae,visible:a==="visible",name:"Transition"})))}function Se(e,r){let n=i.useContext(A)!==null,l=ie()!==null;return C.createElement(C.Fragment,null,!n&&l?C.createElement(K,{ref:r,...e}):C.createElement(oe,{ref:r,...e}))}let K=_(Le),oe=_(Re),ye=_(Se),Ne=Object.assign(K,{Child:ye,Root:K});export{Ne as $,ie as C,$ as d};
